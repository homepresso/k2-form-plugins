<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NintexCase Header - Demo</title>

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #F5F5F7;
      min-height: 100vh;
    }

    .demo-container {
      max-width: 1600px;
      margin: 0 auto;
    }

    .demo-info {
      background: white;
      padding: 32px;
      margin: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .demo-info h1 {
      font-size: 32px;
      color: #1C1B1F;
      margin-bottom: 16px;
    }

    .demo-info p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .demo-info ul {
      margin-left: 24px;
      color: #666;
      line-height: 1.8;
    }

    .demo-info ul strong {
      color: #667eea;
    }

    .header-section {
      margin: 24px;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .section-title {
      padding: 16px 24px;
      background: #F5F5F5;
      font-size: 14px;
      font-weight: 600;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .event-log {
      background: white;
      padding: 24px;
      margin: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .event-log h3 {
      margin-bottom: 16px;
      color: #1C1B1F;
      font-size: 20px;
    }

    .event-log-content {
      max-height: 400px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
      color: #333;
      background: #F9F9F9;
      padding: 16px;
      border-radius: 8px;
      border: 1px solid #E0E0E0;
    }

    .event-entry {
      padding: 8px 0;
      border-bottom: 1px solid #E0E0E0;
    }

    .event-entry:last-child {
      border-bottom: none;
    }

    .event-time {
      color: #999;
      margin-right: 12px;
    }

    .event-name {
      color: #667eea;
      font-weight: 600;
      margin-right: 12px;
    }

    .event-detail {
      color: #555;
    }

    .clear-log-btn {
      margin-top: 16px;
      padding: 10px 20px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background 0.2s;
    }

    .clear-log-btn:hover {
      background: #5568d3;
    }

    .note-box {
      background: #FFF3E0;
      border-left: 4px solid #F57C00;
      padding: 16px;
      margin-top: 16px;
      border-radius: 4px;
      color: #E65100;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <!-- Demo Info -->
    <div class="demo-info">
      <h1>=Ä NintexCase Header Demo</h1>
      <p><strong>This page demonstrates the NintexCase Header control with all its features:</strong></p>
      <ul>
        <li><strong>Back Button:</strong> Navigate back with arrow button</li>
        <li><strong>Title & Subtitle:</strong> Configurable case title and details</li>
        <li><strong>Status & Priority Badges:</strong> Color-coded badges with icons</li>
        <li><strong>Action Icons:</strong> Star, Share, Print buttons</li>
        <li><strong>Text Buttons:</strong> Edit and Reassign actions</li>
        <li><strong>Primary Action Button:</strong> Green "Approve Claim" button</li>
        <li><strong>Dropdown Menu:</strong> Configurable dropdown with multiple actions (demo 2)</li>
        <li><strong>Three-dot Menu:</strong> Additional options menu</li>
      </ul>
      <div class="note-box">
        <strong>Note:</strong> All button clicks are logged below. Try interacting with the different headers!
      </div>
    </div>

    <!-- Header Example 1: Default with Primary Action Button -->
    <div class="header-section">
      <div class="section-title">Example 1: Vehicle Damage Claim (Primary Action Button)</div>
      <nintexcase-case-header id="header1"></nintexcase-case-header>
    </div>

    <!-- Header Example 2: With Dropdown Menu -->
    <div class="header-section">
      <div class="section-title">Example 2: Employee Onboarding (Dropdown Menu)</div>
      <nintexcase-case-header id="header2"></nintexcase-case-header>
    </div>

    <!-- Header Example 3: Minimal Style -->
    <div class="header-section">
      <div class="section-title">Example 3: Support Ticket (Minimal)</div>
      <nintexcase-case-header id="header3"></nintexcase-case-header>
    </div>

    <!-- Event Log -->
    <div class="event-log">
      <h3>=Ê Event Log</h3>
      <div class="event-log-content" id="eventLog">
        <div style="color: #999; font-style: italic;">Waiting for events... Click buttons to see events appear here.</div>
      </div>
      <button class="clear-log-btn" onclick="clearEventLog()">Clear Log</button>
    </div>
  </div>

  <!-- Load Control Scripts -->
  <script src="runtime_logic.js"></script>
  <link rel="stylesheet" href="runtime_style.css">

  <!-- Initialize Controls -->
  <script>
    // Event logging
    const eventLog = document.getElementById('eventLog');
    let eventCount = 0;

    function logEvent(headerName, eventName, detail) {
      eventCount++;
      const time = new Date().toLocaleTimeString();
      const entry = document.createElement('div');
      entry.className = 'event-entry';

      let detailStr = '';
      if (detail && detail.action) {
        detailStr = ` Action: ${detail.action}`;
      }

      entry.innerHTML = `
        <span class="event-time">${time}</span>
        <span class="event-name">${headerName}.${eventName}</span>
        <span class="event-detail">${detailStr}</span>
      `;

      // Clear placeholder text if present
      if (eventLog.children[0]?.style?.fontStyle === 'italic') {
        eventLog.innerHTML = '';
      }

      eventLog.insertBefore(entry, eventLog.firstChild);

      // Limit to 100 entries
      while (eventLog.children.length > 100) {
        eventLog.removeChild(eventLog.lastChild);
      }
    }

    function clearEventLog() {
      eventLog.innerHTML = '<div style="color: #999; font-style: italic;">Event log cleared. Click buttons to see new events...</div>';
      eventCount = 0;
    }

    // Initialize Header 1: Vehicle Damage Claim (matches screenshot)
    const header1 = document.getElementById('header1');
    header1.title = 'Vehicle Damage Claim';
    header1.subtitle = 'CLM-2024-00847 " Michael Johnson " Created Dec 8, 2024';
    header1.showBackButton = true;

    header1.statusText = 'In Review';
    header1.statusIcon = 'schedule';
    header1.statusColor = '#FFF3E0';
    header1.statusTextColor = '#E65100';
    header1.showStatus = true;

    header1.priorityText = 'High Priority';
    header1.priorityIcon = 'flag';
    header1.priorityColor = '#FFEBEE';
    header1.priorityTextColor = '#C62828';
    header1.showPriority = true;

    header1.showStarButton = true;
    header1.showShareButton = true;
    header1.showPrintButton = true;
    header1.showEditButton = true;
    header1.editButtonText = 'Edit';
    header1.showReassignButton = true;
    header1.reassignButtonText = 'Reassign';

    header1.primaryActionText = 'Approve Claim';
    header1.primaryActionColor = '#4CAF50';
    header1.primaryActionTextColor = '#FFFFFF';
    header1.showPrimaryAction = true;
    header1.showDropdown = false;
    header1.showMenuButton = true;

    // Event handlers for header1
    header1.addEventListener('BackClicked', (e) => {
      logEvent('Header1', 'BackClicked', e.detail);
    });

    header1.addEventListener('ActionClicked', (e) => {
      logEvent('Header1', 'ActionClicked', e.detail);
    });

    header1.addEventListener('PrimaryActionClicked', (e) => {
      logEvent('Header1', 'PrimaryActionClicked', e.detail);
    });

    header1.addEventListener('MenuClicked', (e) => {
      logEvent('Header1', 'MenuClicked', e.detail);
    });

    // Initialize Header 2: Employee Onboarding (with dropdown)
    const header2 = document.getElementById('header2');
    header2.title = 'Employee Onboarding';
    header2.subtitle = 'EMP-2024-00156 " Sarah Williams " Started Dec 10, 2024';
    header2.showBackButton = true;

    header2.statusText = 'Pending';
    header2.statusIcon = 'pending';
    header2.statusColor = '#E3F2FD';
    header2.statusTextColor = '#1565C0';
    header2.showStatus = true;

    header2.priorityText = 'Medium Priority';
    header2.priorityIcon = 'flag';
    header2.priorityColor = '#FFF9C4';
    header2.priorityTextColor = '#F57F17';
    header2.showPriority = true;

    header2.showStarButton = true;
    header2.showShareButton = true;
    header2.showPrintButton = true;
    header2.showEditButton = true;
    header2.editButtonText = 'Edit';
    header2.showReassignButton = true;
    header2.reassignButtonText = 'Reassign';

    header2.primaryActionText = 'Actions';
    header2.primaryActionColor = '#667eea';
    header2.primaryActionTextColor = '#FFFFFF';
    header2.showPrimaryAction = false;
    header2.showDropdown = true;
    header2.dropdownActions = 'Approve,Reject,Send Back,Request Info,Archive';
    header2.showMenuButton = true;

    // Event handlers for header2
    header2.addEventListener('BackClicked', (e) => {
      logEvent('Header2', 'BackClicked', e.detail);
    });

    header2.addEventListener('ActionClicked', (e) => {
      logEvent('Header2', 'ActionClicked', e.detail);
    });

    header2.addEventListener('DropdownActionClicked', (e) => {
      logEvent('Header2', 'DropdownActionClicked', e.detail);
      console.log('Dropdown action selected:', e.detail.action);
    });

    header2.addEventListener('MenuClicked', (e) => {
      logEvent('Header2', 'MenuClicked', e.detail);
    });

    // Initialize Header 3: Support Ticket (minimal)
    const header3 = document.getElementById('header3');
    header3.title = 'Support Ticket #12345';
    header3.subtitle = 'Reported by John Doe " Dec 11, 2024';
    header3.showBackButton = true;

    header3.statusText = 'Open';
    header3.statusIcon = 'error_outline';
    header3.statusColor = '#E8F5E9';
    header3.statusTextColor = '#2E7D32';
    header3.showStatus = true;

    header3.showPriority = false;

    header3.showStarButton = false;
    header3.showShareButton = false;
    header3.showPrintButton = true;
    header3.showEditButton = true;
    header3.editButtonText = 'Edit';
    header3.showReassignButton = false;

    header3.primaryActionText = 'Resolve';
    header3.primaryActionColor = '#2196F3';
    header3.primaryActionTextColor = '#FFFFFF';
    header3.showPrimaryAction = true;
    header3.showDropdown = false;
    header3.showMenuButton = true;

    // Event handlers for header3
    header3.addEventListener('BackClicked', (e) => {
      logEvent('Header3', 'BackClicked', e.detail);
    });

    header3.addEventListener('ActionClicked', (e) => {
      logEvent('Header3', 'ActionClicked', e.detail);
    });

    header3.addEventListener('PrimaryActionClicked', (e) => {
      logEvent('Header3', 'PrimaryActionClicked', e.detail);
    });

    header3.addEventListener('MenuClicked', (e) => {
      logEvent('Header3', 'MenuClicked', e.detail);
    });

    // Log initial load
    setTimeout(() => {
      logEvent('System', 'ControlsLoaded', { message: 'All headers initialized' });
      console.log('NintexCase Header control loaded successfully!');
    }, 500);
  </script>
</body>
</html>
