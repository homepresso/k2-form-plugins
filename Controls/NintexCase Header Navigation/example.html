<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NintexCase Header Navigation - Example</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #F5F5F7;
      min-height: 100vh;
    }

    /* Page layout with header at top */
    .page-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .main-content {
      flex: 1;
      padding: 40px 20px;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .demo-header {
      background: white;
      padding: 32px;
      border-radius: 12px;
      margin-bottom: 32px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .demo-header h1 {
      font-size: 32px;
      color: #1C1B1F;
      margin-bottom: 12px;
    }

    .demo-header p {
      color: #666;
      line-height: 1.6;
      font-size: 16px;
      margin-bottom: 8px;
    }

    .demo-header ul {
      margin-left: 24px;
      color: #666;
      line-height: 1.8;
    }

    .content-area {
      background: white;
      padding: 32px;
      border-radius: 12px;
      margin-bottom: 32px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      min-height: 300px;
    }

    .content-area h2 {
      color: #1C1B1F;
      margin-bottom: 16px;
    }

    .content-area p {
      color: #666;
      line-height: 1.6;
    }

    .event-log {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .event-log h3 {
      margin-bottom: 16px;
      color: #1C1B1F;
    }

    .event-log-content {
      max-height: 300px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.8;
      color: #333;
      background: #F9F9F9;
      padding: 16px;
      border-radius: 8px;
    }

    .event-entry {
      padding: 8px 0;
      border-bottom: 1px solid #E0E0E0;
    }

    .event-entry:last-child {
      border-bottom: none;
    }

    .event-time {
      color: #999;
      margin-right: 12px;
    }

    .event-name {
      color: #667eea;
      font-weight: 600;
      margin-right: 12px;
    }

    .clear-log-btn {
      margin-top: 16px;
      padding: 10px 20px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background 0.2s;
    }

    .clear-log-btn:hover {
      background: #5568d3;
    }
  </style>
</head>
<body>
  <div class="page-container">
    <!-- Header Navigation Control (Full width, no gaps) -->
    <nintexcase-header id="header"></nintexcase-header>

    <!-- Main Content -->
    <div class="main-content">
      <div class="demo-header">
        <h1>ðŸ§­ NintexCase Header Navigation</h1>
        <p>
          A full-width header navigation control that sits at the top of your form without gaps. Features include:
        </p>
        <ul>
          <li>Full-width header design (no gaps or margins)</li>
          <li>Horizontal navigation with pill-style buttons</li>
          <li>Mode-based filtering for dynamic navigation items</li>
          <li>User menu dropdown with avatar</li>
          <li>Gradient background support</li>
          <li>Active tab highlighting</li>
          <li>Responsive design</li>
          <li>WCAG 2.1 AA compliant</li>
        </ul>
      </div>

      <div class="content-area">
        <h2 id="contentTitle">Dashboard</h2>
        <p id="contentDescription">
          This is the Dashboard content area. Click on different navigation tabs to see the content change.
        </p>
      </div>

      <!-- Event Log -->
      <div class="event-log">
        <h3>ðŸ“‹ Event Log</h3>
        <div class="event-log-content" id="eventLog">
          <div style="color: #999; font-style: italic;">Click on navigation tabs or user menu items to see events...</div>
        </div>
        <button class="clear-log-btn" onclick="clearEventLog()">Clear Log</button>
      </div>
    </div>
  </div>

  <!-- Load Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- Load Control -->
  <script src="runtime_logic.js"></script>
  <link rel="stylesheet" href="runtime_style.css">

  <!-- Initialize Control -->
  <script>
    const eventLog = document.getElementById('eventLog');
    const contentTitle = document.getElementById('contentTitle');
    const contentDescription = document.getElementById('contentDescription');

    const contentMap = {
      'Dashboard': 'This is the Dashboard content area. View your key metrics and recent activity here.',
      'My Cases': 'Browse and manage your assigned cases. You have 12 active cases.',
      'New Case': 'Create a new case by filling out the case creation form.',
      'Case Details': 'View detailed information about the selected case.',
      'Edit Case': 'Modify case information and update case status.',
      'Tasks': 'View and manage tasks associated with cases. You have 8 pending tasks.',
      'Documents': 'Access case-related documents and attachments.',
      'Reports': 'Generate and view analytics reports for case management.',
      'Admin': 'Administrative functions and system configuration.'
    };

    function logEvent(eventName, detail) {
      const time = new Date().toLocaleTimeString();
      const entry = document.createElement('div');
      entry.className = 'event-entry';

      let detailStr = '';
      if (detail) {
        if (detail.name) detailStr += ` - ${detail.name}`;
        if (detail.index !== undefined) detailStr += ` (Index: ${detail.index})`;
      }

      entry.innerHTML = `<span class="event-time">${time}</span><span class="event-name">${eventName}</span>${detailStr}`;

      if (eventLog.children[0]?.style?.fontStyle === 'italic') {
        eventLog.innerHTML = '';
      }

      eventLog.insertBefore(entry, eventLog.firstChild);
    }

    function clearEventLog() {
      eventLog.innerHTML = '<div style="color: #999; font-style: italic;">Event log cleared. Interact with navigation to see events...</div>';
    }

    // Initialize Header Navigation
    const header = document.getElementById('header');
    header.title = 'Case Manager';
    header.showTitle = true;
    header.titleColor = '#FFFFFF';
    header.titleFontSize = 20;
    header.titleFontWeight = 700;
    header.borderRadius = '8px'; // Rounded bottom corners
    header.position = 'sticky'; // Sticks to top when scrolling ('static', 'sticky', or 'fixed')
    header.zIndex = 1000; // High z-index to stay on top
    header.showUserMenu = true;
    header.displayName = 'John Doe';

    // Sample navigation items with mode filtering
    const navItems = [
      { Name: 'Dashboard', Mode: '' },
      { Name: 'My Cases', Mode: '' },
      { Name: 'New Case', Mode: 'create' },
      { Name: 'Case Details', Mode: 'view' },
      { Name: 'Edit Case', Mode: 'edit' },
      { Name: 'Tasks', Mode: '' },
      { Name: 'Documents', Mode: '' },
      { Name: 'Reports', Mode: '' },
      { Name: 'Admin', Mode: 'admin' }
    ];

    // Sample user menu items
    const userMenuItems = [
      { Name: 'My Profile' },
      { Name: 'Settings' },
      { Name: 'Help & Support' },
      { Name: 'Sign Out' }
    ];

    // Mock K2 list bindings
    header.NavigationListItemsChangedCallback({ NewItems: navItems });
    header.UserMenuListItemsChangedCallback({ NewItems: userMenuItems });

    // Listen for navigation clicks
    header.addEventListener('NavigationItemClicked', (e) => {
      logEvent('NavigationItemClicked', e.detail);

      // Update content area
      const itemName = e.detail.name;
      contentTitle.textContent = itemName;
      contentDescription.textContent = contentMap[itemName] || `This is the ${itemName} content area.`;
    });

    // Listen for user menu clicks
    header.addEventListener('UserMenuItemClicked', (e) => {
      logEvent('UserMenuItemClicked', e.detail);

      if (e.detail.name === 'Sign Out') {
        alert('Sign out clicked! In a real application, this would log the user out.');
      }
    });

    // Log initial load
    setTimeout(() => {
      logEvent('ControlLoaded', { message: `Header initialized with ${navItems.length} navigation items` });
    }, 500);
  </script>
</body>
</html>
